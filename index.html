<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‚¡ç¥¨æ¨¡æ‹Ÿäº¤æ˜“ç³»ç»Ÿ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ç™»å½•æ³¨å†Œé¡µé¢ */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        
        .auth-box {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
        }
        
        .auth-box h2 {
            text-align: center;
            color: #667eea;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }
        
        .auth-switch a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        
        /* ä¸»åº”ç”¨ç•Œé¢ */
        .app-container {
            display: none;
        }
        
        .app-header {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .app-header h1 {
            color: #667eea;
            font-size: 24px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .wallet-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .logout-btn {
            padding: 10px 20px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        
        /* å¯¼èˆªæ ‡ç­¾ */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px;
            background: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        /* å¸‚åœºé€‰æ‹© */
        .market-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .market-tab {
            padding: 12px 24px;
            background: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .market-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        /* è‚¡ç¥¨åˆ—è¡¨ */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 100px;
        }
        
        .stock-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .stock-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .stock-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .stock-symbol {
            font-weight: 700;
            font-size: 18px;
            color: #333;
        }
        
        .stock-price {
            font-size: 20px;
            font-weight: 700;
            color: #27ae60;
        }
        
        .stock-name {
            color: #666;
            font-size: 14px;
        }
        
        /* æµ®åŠ¨èœå• */
        .floating-menu {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 1000;
        }
        
        .floating-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .floating-menu.open .floating-actions {
            max-height: 400px;
        }
        
        .floating-actions .floating-btn {
            transform: scale(0.8);
            opacity: 0;
            pointer-events: none;
            transition: transform 0.25s ease, opacity 0.25s ease;
        }
        
        .floating-menu.open .floating-actions .floating-btn {
            transform: scale(1);
            opacity: 1;
            pointer-events: auto;
        }
        
        .floating-actions .floating-btn:nth-child(1) {
            transition-delay: 0.05s;
        }
        
        .floating-actions .floating-btn:nth-child(2) {
            transition-delay: 0.1s;
        }
        
        .floating-actions .floating-btn:nth-child(3) {
            transition-delay: 0.15s;
        }
        
        .floating-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .floating-toggle {
            font-size: 32px;
        }
        
        .floating-btn:hover {
            transform: scale(1.1);
        }
        
        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff4757;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
        }
        
        .modal h2 {
            color: #667eea;
            margin-bottom: 20px;
        }
        
        /* äº¤æ˜“è¡¨å• */
        .trade-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .trade-input {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .trade-buttons {
            display: flex;
            gap: 10px;
        }
        
        .buy-btn {
            flex: 1;
            padding: 14px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .sell-btn {
            flex: 1;
            padding: 14px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }
        
        /* å›¾è¡¨ */
        .chart-container {
            margin: 20px 0;
            height: 300px;
        }
        
        .chart-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .chart-tab {
            padding: 6px 16px;
            border-radius: 20px;
            border: 2px solid #667eea;
            background: transparent;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .chart-tab.active {
            background: #667eea;
            color: white;
        }
        
        /* è´­ä¹°å†å²å’ŒæŒæœ‰åˆ—è¡¨ */
        .transaction-list, .holdings-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .transaction-item, .holding-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            cursor: default;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .holding-item {
            cursor: pointer;
        }
        
        .holding-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }
        
        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .item-details {
            color: #666;
            font-size: 14px;
        }
        
        /* èµ„äº§è´­ä¹° */
        .asset-category {
            margin-bottom: 30px;
        }
        
        .asset-category h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .asset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .asset-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .asset-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
        }
        
        .asset-card.owned {
            background: #d4edda;
            border-color: #27ae60;
        }
        
        .asset-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .asset-price {
            color: #667eea;
            font-weight: 600;
        }
        
        .asset-type {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        /* ä¸ªäººèµ„æ–™ */
        .profile-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        
        .profile-row {
            display: flex;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .profile-row:last-child {
            border-bottom: none;
        }
        
        .profile-label {
            font-weight: 600;
            color: #666;
        }
        
        .profile-value {
            font-weight: 700;
            color: #333;
        }
        
        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .leaderboard-item {
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            .stock-grid {
                grid-template-columns: 1fr;
            }
            
            .asset-grid {
                grid-template-columns: 1fr;
            }
            
            .floating-menu {
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- ç™»å½•/æ³¨å†Œç•Œé¢ -->
    <div id="authPage" class="auth-container">
        <div class="auth-box">
            <h2 id="authTitle">ç™»å½•</h2>
            <form id="authForm">
                <div class="form-group" id="nameGroup" style="display:none;">
                    <label>å§“å</label>
                    <input type="text" id="nameInput" placeholder="è¯·è¾“å…¥å§“å">
                </div>
                <div class="form-group">
                    <label>é‚®ç®±</label>
                    <input type="email" id="emailInput" placeholder="è¯·è¾“å…¥é‚®ç®±" required>
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" id="passwordInput" placeholder="è¯·è¾“å…¥å¯†ç " required>
                </div>
                <button type="submit" class="btn" id="authSubmitBtn">ç™»å½•</button>
            </form>
            <div class="auth-switch">
                <span id="authSwitchText">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ</span>
                <a href="#" id="authSwitchLink">ç«‹å³æ³¨å†Œ</a>
            </div>
        </div>
    </div>

    <!-- ä¸»åº”ç”¨ç•Œé¢ -->
    <div id="appPage" class="app-container">
        <div class="container">
            <div class="app-header">
                <h1>ğŸ“ˆ è‚¡ç¥¨æ¨¡æ‹Ÿäº¤æ˜“ç³»ç»Ÿ</h1>
                <div class="user-info">
                    <div class="wallet-display">
                        é’±åŒ…: Â¥<span id="walletAmount">100000</span>
                    </div>
                    <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
                </div>
            </div>

            <!-- ä¸»å¯¼èˆª -->
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('market')">äº¤æ˜“å¸‚åœº</button>
                <button class="nav-tab" onclick="showTab('history')">è´­ä¹°å†å²</button>
                <button class="nav-tab" onclick="showTab('holdings')">ç›®å‰æŒæœ‰</button>
            </div>

            <!-- äº¤æ˜“å¸‚åœº -->
            <div id="marketTab" class="tab-content">
                <div class="market-tabs">
                    <button class="market-tab active" onclick="showMarket('ç¾è‚¡', this)">ç¾è‚¡</button>
                    <button class="market-tab" onclick="showMarket('Aè‚¡', this)">Aè‚¡</button>
                    <button class="market-tab" onclick="showMarket('æ¸¯è‚¡', this)">æ¸¯è‚¡</button>
                    <button class="market-tab" onclick="showMarket('åŠ å¯†è´§å¸', this)">åŠ å¯†è´§å¸</button>
                </div>
                <div id="stockGrid" class="stock-grid"></div>
            </div>

            <!-- è´­ä¹°å†å² -->
            <div id="historyTab" class="tab-content" style="display:none;">
                <div id="transactionList" class="transaction-list"></div>
            </div>

            <!-- ç›®å‰æŒæœ‰ -->
            <div id="holdingsTab" class="tab-content" style="display:none;">
                <div id="holdingsList" class="holdings-list"></div>
            </div>
        </div>

        <!-- æµ®åŠ¨èœå• -->
        <div class="floating-menu" id="floatingMenu">
            <div class="floating-actions">
                <button class="floating-btn" onclick="openProfile()" title="ä¸ªäººèµ„æ–™">ğŸ‘¤</button>
                <button class="floating-btn" onclick="openAssets()" title="èµ„äº§è´­ä¹°">ğŸ›’</button>
                <button class="floating-btn" onclick="openLeaderboard()" title="æ’è¡Œæ¦œ">ğŸ†</button>
            </div>
            <button class="floating-btn floating-toggle" onclick="toggleFloatingMenu()" title="å±•å¼€èœå•">ï¼‹</button>
        </div>
    </div>

    <!-- è‚¡ç¥¨äº¤æ˜“æ¨¡æ€æ¡† -->
    <div id="tradeModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('tradeModal')">Ã—</button>
            <h2 id="tradeStockName"></h2>
            <div class="chart-tabs" id="chartTabs">
                <button class="chart-tab active" data-range="day" onclick="setChartRange('day')">å¤©</button>
                <button class="chart-tab" data-range="week" onclick="setChartRange('week')">å‘¨</button>
                <button class="chart-tab" data-range="month" onclick="setChartRange('month')">æœˆ</button>
                <button class="chart-tab" data-range="year" onclick="setChartRange('year')">å¹´</button>
            </div>
            <div class="chart-container">
                <canvas id="stockChart"></canvas>
            </div>
            <div class="trade-form">
                <div>
                    <strong>å½“å‰ä»·æ ¼:</strong> Â¥<span id="tradeCurrentPrice"></span>
                </div>
                <div>
                    <strong>å½“å‰æŒæœ‰:</strong> <span id="tradeHoldingShares">0</span> è‚¡
                </div>
                <input type="number" class="trade-input" id="tradeShares" placeholder="è¯·è¾“å…¥è´­ä¹°/å‡ºå”®è‚¡æ•°" min="1">
                <div>
                    <strong>æ€»é‡‘é¢:</strong> Â¥<span id="tradeTotalAmount">0</span>
                </div>
                <div class="trade-buttons">
                    <button class="buy-btn" onclick="executeTrade('buy')">ä¹°å…¥</button>
                    <button class="sell-btn" onclick="executeTrade('sell')">å–å‡º</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ä¸ªäººèµ„æ–™æ¨¡æ€æ¡† -->
    <div id="profileModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('profileModal')">Ã—</button>
            <h2>ä¸ªäººèµ„æ–™</h2>
            <div class="profile-section">
                <div class="profile-row">
                    <span class="profile-label">å§“å</span>
                    <span class="profile-value" id="profileName"></span>
                </div>
                <div class="profile-row">
                    <span class="profile-label">é‚®ç®±</span>
                    <span class="profile-value" id="profileEmail"></span>
                </div>
                <div class="profile-row">
                    <span class="profile-label">é’±åŒ…ä½™é¢</span>
                    <span class="profile-value">Â¥<span id="profileWallet"></span></span>
                </div>
                <div class="profile-row">
                    <span class="profile-label">è‚¡ç¥¨èµ„äº§ä»·å€¼</span>
                    <span class="profile-value">Â¥<span id="profileStockAssets"></span></span>
                </div>
                <div class="profile-row">
                    <span class="profile-label">å®ç‰©èµ„äº§ä»·å€¼</span>
                    <span class="profile-value">Â¥<span id="profilePhysicalAssets"></span></span>
                </div>
                <div class="profile-row">
                    <span class="profile-label">æ€»èµ„äº§</span>
                    <span class="profile-value" style="color:#27ae60; font-size:20px;">Â¥<span id="profileTotalAssets"></span></span>
                </div>
            </div>
        </div>
    </div>

    <!-- èµ„äº§è´­ä¹°æ¨¡æ€æ¡† -->
    <div id="assetsModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('assetsModal')">Ã—</button>
            <h2>èµ„äº§è´­ä¹°</h2>
            
            <div class="market-tabs" style="margin-bottom: 20px;">
                <button class="market-tab active" onclick="showAssetType('cars')">æ±½è½¦</button>
                <button class="market-tab" onclick="showAssetType('properties')">æˆ¿äº§</button>
            </div>

            <div id="carsSection">
                <div class="asset-category">
                    <h3>ğŸš— 1-20ä¸‡å…ƒè½¦å‹</h3>
                    <div id="cars1" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸš™ 20-100ä¸‡å…ƒè½¦å‹</h3>
                    <div id="cars2" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸï¸ 100-500ä¸‡å…ƒè½¦å‹</h3>
                    <div id="cars3" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸš˜ 500-1000ä¸‡å…ƒè½¦å‹</h3>
                    <div id="cars4" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸ 1000-20000ä¸‡å…ƒè½¦å‹</h3>
                    <div id="cars5" class="asset-grid"></div>
                </div>
            </div>

            <div id="propertiesSection" style="display:none;">
                <div class="asset-category">
                    <h3>ğŸ  5-30ä¸‡å…ƒæˆ¿äº§</h3>
                    <div id="properties1" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸ¡ 30-100ä¸‡å…ƒæˆ¿äº§</h3>
                    <div id="properties2" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸ˜ï¸ 100-1000ä¸‡å…ƒæˆ¿äº§</h3>
                    <div id="properties3" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸ° 1000-5000ä¸‡å…ƒæˆ¿äº§</h3>
                    <div id="properties4" class="asset-grid"></div>
                </div>
                <div class="asset-category">
                    <h3>ğŸ›ï¸ 5000-100000ä¸‡å…ƒæˆ¿äº§</h3>
                    <div id="properties5" class="asset-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ’è¡Œæ¦œæ¨¡æ€æ¡† -->
    <div id="leaderboardModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('leaderboardModal')">Ã—</button>
            <h2>èµ„äº§æ’è¡Œæ¦œ</h2>
            <div id="leaderboardList" class="leaderboard-list"></div>
        </div>
    </div>

    <script>
        // æ•°æ®å®šä¹‰
        const baseStockData = {
            'ç¾è‚¡': [
                { symbol: 'AAPL', name: 'è‹¹æœ', price: 175.43 },
                { symbol: 'MSFT', name: 'å¾®è½¯', price: 378.91 },
                { symbol: 'GOOGL', name: 'è°·æ­Œ', price: 140.22 },
                { symbol: 'AMZN', name: 'äºšé©¬é€Š', price: 178.35 },
                { symbol: 'TSLA', name: 'ç‰¹æ–¯æ‹‰', price: 242.84 },
                { symbol: 'META', name: 'Meta', price: 478.96 },
                { symbol: 'NVDA', name: 'è‹±ä¼Ÿè¾¾', price: 875.28 },
                { symbol: 'BRK.B', name: 'ä¼¯å…‹å¸Œå°”', price: 408.15 },
                { symbol: 'JPM', name: 'æ‘©æ ¹å¤§é€š', price: 189.42 },
                { symbol: 'V', name: 'Visa', price: 278.34 },
                { symbol: 'WMT', name: 'æ²ƒå°”ç›', price: 168.75 },
                { symbol: 'MA', name: 'ä¸‡äº‹è¾¾', price: 445.67 },
                { symbol: 'PG', name: 'å®æ´', price: 162.88 },
                { symbol: 'DIS', name: 'è¿ªå£«å°¼', price: 95.34 },
                { symbol: 'NFLX', name: 'å¥ˆé£', price: 485.73 },
                { symbol: 'KO', name: 'å¯å£å¯ä¹', price: 61.25 },
                { symbol: 'PEP', name: 'ç™¾äº‹', price: 172.45 },
                { symbol: 'COST', name: 'å¥½å¸‚å¤š', price: 721.88 },
                { symbol: 'INTC', name: 'è‹±ç‰¹å°”', price: 43.67 },
                { symbol: 'AMD', name: 'AMD', price: 164.92 }
            ],
            'Aè‚¡': [
                { symbol: '600519', name: 'è´µå·èŒ…å°', price: 1685.50 },
                { symbol: '000858', name: 'äº”ç²®æ¶²', price: 168.73 },
                { symbol: '600036', name: 'æ‹›å•†é“¶è¡Œ', price: 38.45 },
                { symbol: '601318', name: 'ä¸­å›½å¹³å®‰', price: 52.67 },
                { symbol: '600276', name: 'æ’ç‘åŒ»è¯', price: 58.92 },
                { symbol: '000333', name: 'ç¾çš„é›†å›¢', price: 65.34 },
                { symbol: '002594', name: 'æ¯”äºšè¿ª', price: 268.75 },
                { symbol: '600309', name: 'ä¸‡ååŒ–å­¦', price: 88.45 },
                { symbol: '601888', name: 'ä¸­å›½ä¸­å…', price: 92.38 },
                { symbol: '300750', name: 'å®å¾·æ—¶ä»£', price: 198.67 },
                { symbol: '600887', name: 'ä¼Šåˆ©è‚¡ä»½', price: 32.56 },
                { symbol: '000568', name: 'æ³¸å·è€çª–', price: 198.45 },
                { symbol: '601012', name: 'éš†åŸºç»¿èƒ½', price: 24.78 },
                { symbol: '002475', name: 'ç«‹è®¯ç²¾å¯†', price: 35.92 },
                { symbol: '601899', name: 'ç´«é‡‘çŸ¿ä¸š', price: 15.67 },
                { symbol: '600900', name: 'é•¿æ±Ÿç”µåŠ›', price: 25.43 },
                { symbol: '601166', name: 'å…´ä¸šé“¶è¡Œ', price: 18.92 },
                { symbol: '000001', name: 'å¹³å®‰é“¶è¡Œ', price: 13.45 },
                { symbol: '600031', name: 'ä¸‰ä¸€é‡å·¥', price: 18.76 },
                { symbol: '601288', name: 'å†œä¸šé“¶è¡Œ', price: 4.32 }
            ],
            'æ¸¯è‚¡': [
                { symbol: '00700', name: 'è…¾è®¯æ§è‚¡', price: 398.60 },
                { symbol: '09988', name: 'é˜¿é‡Œå·´å·´', price: 98.75 },
                { symbol: '00941', name: 'ä¸­å›½ç§»åŠ¨', price: 88.45 },
                { symbol: '01299', name: 'å‹é‚¦ä¿é™©', price: 72.35 },
                { symbol: '01398', name: 'å·¥å•†é“¶è¡Œ', price: 5.67 },
                { symbol: '00939', name: 'å»ºè®¾é“¶è¡Œ', price: 6.23 },
                { symbol: '03690', name: 'ç¾å›¢', price: 178.90 },
                { symbol: '00388', name: 'é¦™æ¸¯äº¤æ˜“æ‰€', price: 298.40 },
                { symbol: '02318', name: 'ä¸­å›½å¹³å®‰', price: 52.85 },
                { symbol: '01810', name: 'å°ç±³é›†å›¢', price: 28.65 },
                { symbol: '02269', name: 'è¯æ˜ç”Ÿç‰©', price: 34.75 },
                { symbol: '09618', name: 'äº¬ä¸œé›†å›¢', price: 142.30 },
                { symbol: '01024', name: 'å¿«æ‰‹', price: 56.80 },
                { symbol: '00175', name: 'å‰åˆ©æ±½è½¦', price: 12.45 },
                { symbol: '02020', name: 'å®‰è¸ä½“è‚²', price: 88.90 },
                { symbol: '01833', name: 'å¹³å®‰å¥½åŒ»ç”Ÿ', price: 28.35 },
                { symbol: '06690', name: 'æµ·å°”æ™ºå®¶', price: 32.75 },
                { symbol: '00883', name: 'ä¸­å›½æµ·æ´‹çŸ³æ²¹', price: 18.92 },
                { symbol: '01093', name: 'çŸ³è¯é›†å›¢', price: 8.67 },
                { symbol: '01177', name: 'ä¸­å›½ç”Ÿç‰©åˆ¶è¯', price: 5.43 }
            ],
            'åŠ å¯†è´§å¸': [
                { symbol: 'BTC', name: 'æ¯”ç‰¹å¸', price: 87654.32 },
                { symbol: 'ETH', name: 'ä»¥å¤ªåŠ', price: 3245.67 },
                { symbol: 'BNB', name: 'å¸å®‰å¸', price: 612.45 },
                { symbol: 'XRP', name: 'ç‘æ³¢å¸', price: 0.58 },
                { symbol: 'ADA', name: 'è‰¾è¾¾å¸', price: 0.45 },
                { symbol: 'SOL', name: 'Solana', price: 123.78 },
                { symbol: 'DOGE', name: 'ç‹—ç‹—å¸', price: 0.12 },
                { symbol: 'DOT', name: 'Polkadot', price: 7.89 },
                { symbol: 'MATIC', name: 'Polygon', price: 0.89 },
                { symbol: 'SHIB', name: 'æŸ´çŠ¬å¸', price: 0.000025 },
                { symbol: 'AVAX', name: 'Avalanche', price: 38.92 },
                { symbol: 'UNI', name: 'Uniswap', price: 8.45 },
                { symbol: 'LINK', name: 'Chainlink', price: 15.67 },
                { symbol: 'LTC', name: 'è±ç‰¹å¸', price: 92.34 },
                { symbol: 'ATOM', name: 'Cosmos', price: 11.23 },
                { symbol: 'XLM', name: 'æ’æ˜Ÿå¸', price: 0.13 },
                { symbol: 'TRX', name: 'æ³¢åœºå¸', price: 0.11 },
                { symbol: 'BCH', name: 'æ¯”ç‰¹å¸ç°é‡‘', price: 456.78 }
            ]
        };

        const carData = {
            '1-20ä¸‡': [
                { name: 'æ¯”äºšè¿ªæµ·è±š', price: 11.68, type: 'æ–°èƒ½æº' },
                { name: 'æ¯”äºšè¿ªç§¦PLUS', price: 12.98, type: 'æ–°èƒ½æº' },
                { name: 'äº”è±å®å…‰MINI EV', price: 3.88, type: 'æ–°èƒ½æº' },
                { name: 'æ¬§æ‹‰å¥½çŒ«', price: 13.99, type: 'æ–°èƒ½æº' },
                { name: 'å°é¹P5', price: 18.79, type: 'æ–°èƒ½æº' },
                { name: 'å“ªå’U', price: 14.98, type: 'æ–°èƒ½æº' },
                { name: 'é›¶è·‘C11', price: 17.98, type: 'æ–°èƒ½æº' },
                { name: 'æœ¬ç”°é›…é˜', price: 17.98, type: 'æ—¥ç³»' },
                { name: 'ä¸°ç”°å‡¯ç¾ç‘', price: 17.98, type: 'æ—¥ç³»' },
                { name: 'æ—¥äº§è½©é€¸', price: 10.90, type: 'æ—¥ç³»' },
                { name: 'é©¬è‡ªè¾¾CX-5', price: 17.58, type: 'æ—¥ç³»' },
                { name: 'å¤§ä¼—æœ—é€¸', price: 10.79, type: 'å¾·ç³»' },
                { name: 'å¤§ä¼—å¸•è¨ç‰¹', price: 18.19, type: 'å¾·ç³»' },
                { name: 'å¤§ä¼—é€”è§‚L', price: 19.90, type: 'å¾·ç³»' },
                { name: 'åˆ«å…‹å›å¨', price: 18.88, type: 'ç¾ç³»' },
                { name: 'é›ªä½›å…°è¿ˆé”å®XL', price: 16.49, type: 'ç¾ç³»' },
                { name: 'ç¦ç‰¹è’™è¿ªæ¬§', price: 18.98, type: 'ç¾ç³»' },
                { name: 'å‰åˆ©æ˜Ÿç‘', price: 11.37, type: 'å›½äº§' },
                { name: 'é•¿å®‰UNI-V', price: 12.79, type: 'å›½äº§' },
                { name: 'å“ˆå¼—H6', price: 11.59, type: 'å›½äº§' },
                { name: 'é¢†å…‹03', price: 14.98, type: 'å›½äº§' },
                { name: 'åçˆµMG6', price: 10.98, type: 'å›½äº§' },
                { name: 'å¥‡ç‘ç‘è™8', price: 10.99, type: 'å›½äº§' },
                { name: 'é•¿åŸç‚®', price: 11.78, type: 'å›½äº§' },
                { name: 'å¦å…‹300', price: 19.98, type: 'å›½äº§' },
                { name: 'çº¢æ——H5', price: 15.98, type: 'å›½äº§' },
                { name: 'ç°ä»£é€”èƒœ', price: 16.18, type: 'éŸ©ç³»' },
                { name: 'èµ·äºšK5', price: 16.18, type: 'éŸ©ç³»' },
                { name: 'æ–¯æŸ¯è¾¾é€Ÿæ´¾', price: 16.99, type: 'å¾·ç³»' },
                { name: 'æ ‡è‡´508', price: 15.97, type: 'æ³•ç³»' }
            ],
            '20-100ä¸‡': [
                { name: 'ç‰¹æ–¯æ‹‰Model 3', price: 25.99, type: 'æ–°èƒ½æº' },
                { name: 'ç‰¹æ–¯æ‹‰Model Y', price: 26.39, type: 'æ–°èƒ½æº' },
                { name: 'æ¯”äºšè¿ªæ±‰EV', price: 21.98, type: 'æ–°èƒ½æº' },
                { name: 'è”šæ¥ES6', price: 35.80, type: 'æ–°èƒ½æº' },
                { name: 'ç†æƒ³L8', price: 35.98, type: 'æ–°èƒ½æº' },
                { name: 'å°é¹P7', price: 24.99, type: 'æ–°èƒ½æº' },
                { name: 'å¥”é©°Cçº§', price: 32.52, type: 'BBA' },
                { name: 'å®é©¬3ç³»', price: 29.39, type: 'BBA' },
                { name: 'å¥¥è¿ªA4L', price: 32.18, type: 'BBA' },
                { name: 'å¥”é©°Eçº§', price: 47.58, type: 'BBA' },
                { name: 'å®é©¬5ç³»', price: 44.99, type: 'BBA' },
                { name: 'å¥¥è¿ªA6L', price: 42.79, type: 'BBA' },
                { name: 'é›·å…‹è¨æ–¯ES', price: 29.49, type: 'è±ªåæ—¥ç³»' },
                { name: 'è‹±è²å°¼è¿ªQ50L', price: 26.98, type: 'è±ªåæ—¥ç³»' },
                { name: 'å‡¯è¿ªæ‹‰å…‹CT5', price: 27.97, type: 'ç¾ç³»è±ªå' },
                { name: 'æ—è‚¯å†’é™©å®¶', price: 24.68, type: 'ç¾ç³»è±ªå' }
            ],
            '100-500ä¸‡': [
                { name: 'ç‰¹æ–¯æ‹‰Model S', price: 78.99, type: 'æ–°èƒ½æº' },
                { name: 'ç‰¹æ–¯æ‹‰Model X', price: 87.99, type: 'æ–°èƒ½æº' },
                { name: 'è”šæ¥ES8', price: 52.80, type: 'æ–°èƒ½æº' },
                { name: 'è”šæ¥ET7', price: 45.80, type: 'æ–°èƒ½æº' },
                { name: 'ç†æƒ³L9', price: 45.98, type: 'æ–°èƒ½æº' },
                { name: 'å¥”é©°Sçº§', price: 91.78, type: 'BBA' },
                { name: 'å®é©¬7ç³»', price: 82.80, type: 'BBA' },
                { name: 'å¥¥è¿ªA8L', price: 84.28, type: 'BBA' },
                { name: 'ä¿æ—¶æ·Macan', price: 58.90, type: 'ä¿æ—¶æ·' },
                { name: 'ä¿æ—¶æ·Cayenne', price: 92.80, type: 'ä¿æ—¶æ·' },
                { name: 'è·¯è™æ½èƒœè¿åŠ¨ç‰ˆ', price: 90.80, type: 'è·¯è™' },
                { name: 'ç›èæ‹‰è’‚Ghibli', price: 89.80, type: 'æ„å¤§åˆ©' },
                { name: 'å¥”é©°Gçº§', price: 155.88, type: 'BBA' }
            ],
            '500-1000ä¸‡': [
                { name: 'ä¿æ—¶æ·911', price: 125.80, type: 'ä¿æ—¶æ·' },
                { name: 'ä¿æ—¶æ·Panamera', price: 97.30, type: 'ä¿æ—¶æ·' },
                { name: 'å®¾åˆ©é£é©°', price: 251.80, type: 'è‹±å›½è±ªå' },
                { name: 'è¿ˆå·´èµ«Sçº§', price: 146.80, type: 'å¥”é©°' },
                { name: 'åŠ³æ–¯è±æ–¯å¤æ€ç‰¹', price: 450.00, type: 'è‹±å›½è±ªå' },
                { name: 'ç›èæ‹‰è’‚æ€»è£', price: 143.80, type: 'æ„å¤§åˆ©' },
                { name: 'é˜¿æ–¯é¡¿é©¬ä¸DB11', price: 229.80, type: 'è‹±å›½è·‘è½¦' },
                { name: 'å®é©¬i7', price: 105.80, type: 'BBAæ–°èƒ½æº' }
            ],
            '1000-20000ä¸‡': [
                { name: 'æ³•æ‹‰åˆ©Roma', price: 238.00, type: 'æ³•æ‹‰åˆ©' },
                { name: 'å…°åšåŸºå°¼Urus', price: 313.00, type: 'å…°åšåŸºå°¼' },
                { name: 'åŠ³æ–¯è±æ–¯å¹»å½±', price: 790.00, type: 'åŠ³æ–¯è±æ–¯' },
                { name: 'å¸ƒåŠ è¿ªChiron', price: 2500.00, type: 'å¸ƒåŠ è¿ª' },
                { name: 'å¸•åŠ å°¼Huayra', price: 2800.00, type: 'å¸•åŠ å°¼' },
                { name: 'æŸ¯å°¼å¡æ ¼Agera', price: 2600.00, type: 'æŸ¯å°¼å¡æ ¼' },
                { name: 'è¿ˆå·´èµ«62S', price: 538.00, type: 'è¿ˆå·´èµ«' },
                { name: 'å®¾åˆ©æ…•å°š', price: 498.00, type: 'å®¾åˆ©' },
                { name: 'é˜¿æ–¯é¡¿é©¬ä¸One-77', price: 3500.00, type: 'é˜¿æ–¯é¡¿é©¬ä¸' },
                { name: 'å…°åšåŸºå°¼Aventador', price: 628.00, type: 'å…°åšåŸºå°¼' }
            ]
        };

        const propertyData = {
            '5-30ä¸‡': [
                { name: 'é»‘é¾™æ±Ÿå“ˆå°”æ»¨è€æ—§å…¬å¯“', price: 8.50, location: 'å“ˆå°”æ»¨' },
                { name: 'æ¡¥æ´ä¸´æ—¶ä½æ‰€', price: 0.50, location: 'æŸåŸå¸‚' },
                { name: 'é¹¤å²—å¸‚åŒºå°æˆ·å‹', price: 5.00, location: 'é¹¤å²—' },
                { name: 'å†œæ‘è‡ªå»ºå°æˆ¿', price: 12.00, location: 'å†œæ‘' },
                { name: 'å¿åŸè€æ—§å•å…ƒæˆ¿', price: 15.00, location: 'å¿åŸ' },
                { name: 'ä¸‰çº¿åŸå¸‚å…¬å¯“', price: 22.00, location: 'ä¸‰çº¿åŸå¸‚' },
                { name: 'ä¹¡é•‡å°äº§æƒæˆ¿', price: 8.00, location: 'ä¹¡é•‡' },
                { name: 'åŸä¸­æ‘æ¡æ‰‹æ¥¼', price: 18.00, location: 'åŸä¸­æ‘' },
                { name: 'è€å·¥ä¸šåŒºèŒå·¥å®¿èˆ', price: 10.00, location: 'å·¥ä¸šåŒº' },
                { name: 'å°å¿åŸå•†å“æˆ¿', price: 25.00, location: 'å¿åŸ' },
                { name: 'éƒŠåŒºå®‰ç½®æˆ¿', price: 20.00, location: 'éƒŠåŒº' },
                { name: 'æ£šæ”¹å›è¿æˆ¿', price: 16.00, location: 'åŸåŒº' },
                { name: 'é›†ä½“å®¿èˆå•é—´', price: 6.00, location: 'å·¥ä¸šå›­' },
                { name: 'å±±åŒºè‡ªå»ºæˆ¿', price: 9.00, location: 'å±±åŒº' },
                { name: 'å°é•‡ä¸´è¡—å•†é“º', price: 28.00, location: 'å°é•‡' },
                { name: 'åŸéƒŠå†œå®¶é™¢', price: 13.00, location: 'åŸéƒŠ' },
                { name: 'è€æ—§ç­’å­æ¥¼', price: 7.00, location: 'è€åŸåŒº' },
                { name: 'è¿œéƒŠæ–°å†œæ‘ä½å®…', price: 19.00, location: 'è¿œéƒŠ' },
                { name: 'å››çº¿åŸå¸‚å°åŒºæˆ¿', price: 23.00, location: 'å››çº¿åŸå¸‚' },
                { name: 'çŸ¿åŒºèŒå·¥æ¥¼', price: 11.00, location: 'çŸ¿åŒº' },
                { name: 'åŸè¾¹æ‘æ°‘æˆ¿', price: 14.00, location: 'åŸè¾¹æ‘' },
                { name: 'ä¹¡é•‡ä¸­å¿ƒè¡—æˆ¿', price: 21.00, location: 'ä¹¡é•‡' },
                { name: 'è€å¼å•ä½åˆ†æˆ¿', price: 17.00, location: 'å¸‚åŒº' },
                { name: 'åè¿œåœ°åŒºå¹³æˆ¿', price: 6.50, location: 'åè¿œåœ°åŒº' },
                { name: 'å°åŸé•‡ä¸¤å±…å®¤', price: 26.00, location: 'å°åŸé•‡' },
                { name: 'å†œåœºèŒå·¥æˆ¿', price: 9.50, location: 'å†œåœº' },
                { name: 'åŸå¸‚è¾¹ç¼˜å…¬å¯“', price: 24.00, location: 'åŸå¸‚è¾¹ç¼˜' },
                { name: 'è€ç¤¾åŒºç¦åˆ©æˆ¿', price: 15.50, location: 'è€ç¤¾åŒº' },
                { name: 'å¼€å‘åŒºå‘˜å·¥å®¿èˆ', price: 12.50, location: 'å¼€å‘åŒº' },
                { name: 'è¿œéƒŠå°åˆ«å¢…', price: 29.00, location: 'è¿œéƒŠ' }
            ],
            '30-100ä¸‡': [
                { name: 'éƒŠåŒºå°åˆ«å¢…', price: 45.00, location: 'éƒŠåŒº' },
                { name: 'ä¸‰çº¿åŸå¸‚å¤§å¹³å±‚', price: 68.00, location: 'ä¸‰çº¿åŸå¸‚' },
                { name: 'å¿åŸä¸­å¿ƒå•†å“æˆ¿', price: 55.00, location: 'å¿åŸ' },
                { name: 'äºŒçº¿åŸå¸‚è¿œéƒŠæˆ¿', price: 72.00, location: 'äºŒçº¿åŸå¸‚' },
                { name: 'æ²¿æµ·å°é•‡æµ·æ™¯æˆ¿', price: 85.00, location: 'æ²¿æµ·' },
                { name: 'å¤é•‡æ™¯åŒºæ°‘å®¿', price: 62.00, location: 'å¤é•‡' },
                { name: 'åº¦å‡åŒºå°é™¢', price: 78.00, location: 'åº¦å‡åŒº' },
                { name: 'å±±åŒºåˆ«å¢…', price: 58.00, location: 'å±±åŒº' },
                { name: 'éƒŠåŒºè”æ’åˆ«å¢…', price: 88.00, location: 'éƒŠåŒº' },
                { name: 'æ–°åŒºä¸‰å±…å®¤', price: 66.00, location: 'æ–°åŒº' },
                { name: 'åŸå¸‚å‰¯ä¸­å¿ƒå…¬å¯“', price: 75.00, location: 'å‰¯ä¸­å¿ƒ' },
                { name: 'é«˜æ–°åŒºä½å®…', price: 82.00, location: 'é«˜æ–°åŒº' },
                { name: 'æ¹–æ™¯å°åŒºæˆ¿', price: 91.00, location: 'æ¹–æ™¯åŒº' },
                { name: 'æ¸©æ³‰åº¦å‡åˆ«å¢…', price: 95.00, location: 'æ¸©æ³‰åŒº' },
                { name: 'éƒŠé‡å…¬å›­åˆ«å¢…', price: 70.00, location: 'éƒŠé‡' },
                { name: 'æ»¨æ±Ÿæ–°åŸå…¬å¯“', price: 79.00, location: 'æ»¨æ±Ÿ' },
                { name: 'ç§‘æŠ€å›­åŒºä½å®…', price: 73.00, location: 'ç§‘æŠ€å›­' },
                { name: 'å¤§å­¦åŸå…¬å¯“', price: 64.00, location: 'å¤§å­¦åŸ' },
                { name: 'æ—…æ¸¸åŒºåº¦å‡å±‹', price: 86.00, location: 'æ—…æ¸¸åŒº' },
                { name: 'ç”Ÿæ€å›­åˆ«å¢…', price: 92.00, location: 'ç”Ÿæ€å›­' },
                { name: 'æ–°åŸåŒºå¤å¼æ¥¼', price: 77.00, location: 'æ–°åŸ' },
                { name: 'éƒŠåŒºåŒæ‹¼åˆ«å¢…', price: 89.00, location: 'éƒŠåŒº' },
                { name: 'å¼€å‘åŒºæ´‹æˆ¿', price: 71.00, location: 'å¼€å‘åŒº' },
                { name: 'å›­æ—å°åŒºæˆ¿', price: 81.00, location: 'å›­æ—åŒº' },
                { name: 'æ£®æ—åˆ«å¢…', price: 97.00, location: 'æ£®æ—åŒº' }
            ],
            '100-1000ä¸‡': [
                { name: 'ä¸Šæµ·éƒŠåŒºåˆ«å¢…', price: 280.00, location: 'ä¸Šæµ·' },
                { name: 'æ·±åœ³é¾™åå¤§å¹³å±‚', price: 350.00, location: 'æ·±åœ³' },
                { name: 'åŒ—äº¬äº”ç¯å…¬å¯“', price: 420.00, location: 'åŒ—äº¬' },
                { name: 'å¹¿å·å¤©æ²³è±ªå®…', price: 380.00, location: 'å¹¿å·' },
                { name: 'æ­å·è¥¿æ¹–åˆ«å¢…', price: 550.00, location: 'æ­å·' },
                { name: 'æˆéƒ½é«˜æ–°åŒºè±ªå®…', price: 320.00, location: 'æˆéƒ½' },
                { name: 'ä¸‰äºšæµ·æ™¯åˆ«å¢…', price: 680.00, location: 'ä¸‰äºš' },
                { name: 'è‹å·å›­åŒºåˆ«å¢…', price: 450.00, location: 'è‹å·' },
                { name: 'å¦é—¨æµ·è¾¹è±ªå®…', price: 520.00, location: 'å¦é—¨' },
                { name: 'é’å²›æµ·æ™¯åˆ«å¢…', price: 480.00, location: 'é’å²›' },
                { name: 'å—äº¬æ±Ÿæ™¯è±ªå®…', price: 410.00, location: 'å—äº¬' },
                { name: 'æ­¦æ±‰æ±Ÿæ™¯å¤§å¹³å±‚', price: 360.00, location: 'æ­¦æ±‰' },
                { name: 'é•¿æ²™å¸‚ä¸­å¿ƒè±ªå®…', price: 330.00, location: 'é•¿æ²™' },
                { name: 'é‡åº†æ±Ÿæ™¯åˆ«å¢…', price: 390.00, location: 'é‡åº†' },
                { name: 'å¤©æ´¥æ»¨æµ·è±ªå®…', price: 370.00, location: 'å¤©æ´¥' },
                { name: 'è¥¿å®‰é«˜æ–°åŒºåˆ«å¢…', price: 340.00, location: 'è¥¿å®‰' },
                { name: 'å¤§è¿æµ·æ™¯è±ªå®…', price: 460.00, location: 'å¤§è¿' },
                { name: 'ç æµ·æµ·è¾¹åˆ«å¢…', price: 510.00, location: 'ç æµ·' },
                { name: 'ä¸œäº¬éƒŠåŒºåˆ«å¢…', price: 620.00, location: 'ä¸œäº¬' },
                { name: 'è«æ–¯ç§‘å¸‚åŒºå…¬å¯“', price: 580.00, location: 'è«æ–¯ç§‘' }
            ],
            '1000-5000ä¸‡': [
                { name: 'ä¸Šæµ·æµ¦ä¸œé¡¶çº§è±ªå®…', price: 1580.00, location: 'ä¸Šæµ·æµ¦ä¸œ' },
                { name: 'åŒ—äº¬CBDè¶…çº§å…¬å¯“', price: 2200.00, location: 'åŒ—äº¬CBD' },
                { name: 'æ·±åœ³å—å±±ç§‘æŠ€è±ªå®…', price: 1850.00, location: 'æ·±åœ³å—å±±' },
                { name: 'å¹¿å·ç æ±Ÿæ–°åŸé¡¶è±ª', price: 1920.00, location: 'å¹¿å·' },
                { name: 'é¦™æ¸¯åŠå±±åˆ«å¢…', price: 3800.00, location: 'é¦™æ¸¯' },
                { name: 'ä¸œäº¬é“¶åº§å…¬å¯“', price: 2650.00, location: 'ä¸œäº¬' },
                { name: 'çº½çº¦æ›¼å“ˆé¡¿å…¬å¯“', price: 4200.00, location: 'çº½çº¦' },
                { name: 'å·´é»å¸‚ä¸­å¿ƒè±ªå®…', price: 3200.00, location: 'å·´é»' },
                { name: 'ä¼¦æ•¦è‚¯è¾›é¡¿åˆ«å¢…', price: 4500.00, location: 'ä¼¦æ•¦' },
                { name: 'æ´›æ‰çŸ¶æ¯”ä½›åˆ©åˆ«å¢…', price: 3900.00, location: 'æ´›æ‰çŸ¶' }
            ],
            '5000-100000ä¸‡': [
                { name: 'é¦™æ¸¯å¤ªå¹³å±±é¡¶è±ªå®…', price: 8800.00, location: 'é¦™æ¸¯' },
                { name: 'ä¸Šæµ·å¤–æ»©é¡¶çº§å…¬å¯“', price: 12000.00, location: 'ä¸Šæµ·' },
                { name: 'çº½çº¦ä¸­å¤®å…¬å›­è±ªå®…', price: 25000.00, location: 'çº½çº¦' },
                { name: 'ä¼¦æ•¦æµ·å¾·å…¬å›­åˆ«å¢…', price: 18000.00, location: 'ä¼¦æ•¦' },
                { name: 'æ‘©çº³å“¥æµ·æ™¯è±ªå®…', price: 35000.00, location: 'æ‘©çº³å“¥' },
                { name: 'è¿ªæ‹œæ£•æ¦ˆå²›åˆ«å¢…', price: 15000.00, location: 'è¿ªæ‹œ' },
                { name: 'æ´›æ‰çŸ¶æ¯”ä½›åˆ©å±±åº„', price: 22000.00, location: 'æ´›æ‰çŸ¶' }
            ]
        };

        // å…¨å±€å˜é‡
        let currentUser = null;
        let currentMarket = 'ç¾è‚¡';
        let currentStock = null;
        let stockChart = null;
        let isLoginMode = true;
        let ownedAssets = [];
        let priceUpdateTimer = null;
        let stockData = cloneStockData();
        let currentChartRange = 'day';

        function cloneStockData() {
            return JSON.parse(JSON.stringify(baseStockData));
        }

        function loadUserStockData() {
            if (!currentUser) return cloneStockData();
            const stored = localStorage.getItem('stockData_' + currentUser.id);
            return stored ? JSON.parse(stored) : cloneStockData();
        }

        function saveUserStockData() {
            if (!currentUser) return;
            localStorage.setItem('stockData_' + currentUser.id, JSON.stringify(stockData));
        }

        // åˆå§‹åŒ–
        window.onload = function() {
            initAuth();
            loadOwnedAssets();
        };

        // è®¤è¯ç›¸å…³
        function initAuth() {
            const authForm = document.getElementById('authForm');
            const authSwitchLink = document.getElementById('authSwitchLink');
            
            authForm.addEventListener('submit', handleAuth);
            authSwitchLink.addEventListener('click', toggleAuthMode);
        }

        function toggleAuthMode(e) {
            e.preventDefault();
            isLoginMode = !isLoginMode;
            
            const nameGroup = document.getElementById('nameGroup');
            const authTitle = document.getElementById('authTitle');
            const authSubmitBtn = document.getElementById('authSubmitBtn');
            const authSwitchText = document.getElementById('authSwitchText');
            const authSwitchLink = document.getElementById('authSwitchLink');
            
            if (isLoginMode) {
                nameGroup.style.display = 'none';
                authTitle.textContent = 'ç™»å½•';
                authSubmitBtn.textContent = 'ç™»å½•';
                authSwitchText.textContent = 'è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ';
                authSwitchLink.textContent = 'ç«‹å³æ³¨å†Œ';
            } else {
                nameGroup.style.display = 'block';
                authTitle.textContent = 'æ³¨å†Œ';
                authSubmitBtn.textContent = 'æ³¨å†Œ';
                authSwitchText.textContent = 'å·²æœ‰è´¦å·ï¼Ÿ';
                authSwitchLink.textContent = 'ç«‹å³ç™»å½•';
            }
        }

        function handleAuth(e) {
            e.preventDefault();
            
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            const name = document.getElementById('nameInput').value;
            
            if (isLoginMode) {
                // ç™»å½•
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const user = users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    currentUser = user;
                    showApp();
                } else {
                    alert('é‚®ç®±æˆ–å¯†ç é”™è¯¯ï¼');
                }
            } else {
                // æ³¨å†Œ
                if (!name) {
                    alert('è¯·è¾“å…¥å§“åï¼');
                    return;
                }
                
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                
                if (users.find(u => u.email === email)) {
                    alert('è¯¥é‚®ç®±å·²è¢«æ³¨å†Œï¼');
                    return;
                }
                
                const newUser = {
                    id: Date.now().toString(),
                    name,
                    email,
                    password,
                    wallet: 100000,
                    createdAt: new Date().toISOString()
                };
                
                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                currentUser = newUser;
                showApp();
            }
        }

        function showApp() {
            document.getElementById('authPage').style.display = 'none';
            document.getElementById('appPage').style.display = 'block';
            stockData = loadUserStockData();
            updateWalletDisplay();
            showMarket('ç¾è‚¡');
            startPriceUpdates();
        }

        function logout() {
            if (currentUser) {
                saveUserStockData();
            }
            currentUser = null;
            stockData = cloneStockData();
            document.getElementById('appPage').style.display = 'none';
            document.getElementById('authPage').style.display = 'flex';
            document.getElementById('authForm').reset();
            if (priceUpdateTimer) {
                clearInterval(priceUpdateTimer);
                priceUpdateTimer = null;
            }
        }

        function updateWalletDisplay() {
            document.getElementById('walletAmount').textContent = currentUser.wallet.toFixed(2);
        }

        // æ ‡ç­¾åˆ‡æ¢
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            document.getElementById('marketTab').style.display = 'none';
            document.getElementById('historyTab').style.display = 'none';
            document.getElementById('holdingsTab').style.display = 'none';
            
            if (tabName === 'market') {
                document.getElementById('marketTab').style.display = 'block';
            } else if (tabName === 'history') {
                document.getElementById('historyTab').style.display = 'block';
                loadTransactionHistory();
            } else if (tabName === 'holdings') {
                document.getElementById('holdingsTab').style.display = 'block';
                loadHoldings();
            }
        }

        // å¸‚åœºåˆ‡æ¢
        function showMarket(market, tabElement = null) {
            currentMarket = market;
            
            const tabs = document.querySelectorAll('#marketTab .market-tabs .market-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            if (tabElement) {
                tabElement.classList.add('active');
            } else {
                const matchedTab = Array.from(tabs).find(tab => tab.textContent === market);
                if (matchedTab) {
                    matchedTab.classList.add('active');
                }
            }
            
            renderStockGrid();
        }

        function renderStockGrid() {
            const stockGrid = document.getElementById('stockGrid');
            if (!stockGrid) return;
            
            stockGrid.innerHTML = '';
            const stocks = stockData[currentMarket] || [];
            
            stocks.forEach(stock => {
                const card = document.createElement('div');
                card.className = 'stock-card';
                card.onclick = () => openTradeModal(stock, currentMarket);
                
                card.innerHTML = `
                    <div class="stock-header">
                        <div class="stock-symbol">${stock.symbol}</div>
                        <div class="stock-price">Â¥${stock.price.toFixed(2)}</div>
                    </div>
                    <div class="stock-name">${stock.name}</div>
                `;
                
                stockGrid.appendChild(card);
            });
        }

        function toggleFloatingMenu() {
            const menu = document.getElementById('floatingMenu');
            if (!menu) return;
            menu.classList.toggle('open');
        }

        function closeFloatingMenu() {
            const menu = document.getElementById('floatingMenu');
            if (!menu) return;
            menu.classList.remove('open');
        }

        function startPriceUpdates() {
            if (priceUpdateTimer) return;
            
            priceUpdateTimer = setInterval(() => {
                simulatePriceFluctuations();
                renderStockGrid();
                
                const holdingsTab = document.getElementById('holdingsTab');
                if (holdingsTab && holdingsTab.style.display !== 'none') {
                    loadHoldings();
                }
                
                const profileModal = document.getElementById('profileModal');
                if (profileModal && profileModal.classList.contains('active')) {
                    openProfile();
                }
            }, 5000);
        }

        function simulatePriceFluctuations() {
            if (!currentUser) return;
            Object.keys(stockData).forEach(market => {
                stockData[market].forEach(stock => {
                    const changePercent = (Math.random() - 0.5) * 0.04; // éšæœºæ³¢åŠ¨ Â±2%
                    const nextPrice = Math.max(stock.price * (1 + changePercent), 0.01);
                    stock.price = parseFloat(nextPrice.toFixed(2));
                });
            });
            
            saveUserStockData();
            updateCurrentStockPrice();
        }

        function updateCurrentStockPrice() {
            if (!currentStock) return;
            
            const marketStocks = stockData[currentStock.market] || [];
            const latest = marketStocks.find(s => s.symbol === currentStock.symbol);
            if (!latest) return;
            
            currentStock.price = latest.price;
            
            const tradeModal = document.getElementById('tradeModal');
            if (tradeModal && tradeModal.classList.contains('active')) {
                document.getElementById('tradeCurrentPrice').textContent = currentStock.price.toFixed(2);
                
                const shares = parseFloat(document.getElementById('tradeShares').value) || 0;
                document.getElementById('tradeTotalAmount').textContent = (shares * currentStock.price).toFixed(2);
            }
        }

        // äº¤æ˜“æ¨¡æ€æ¡†
        function openTradeModal(stock, market) {
            currentStock = { ...stock, market };
            
            document.getElementById('tradeStockName').textContent = `${stock.name} (${stock.symbol})`;
            document.getElementById('tradeCurrentPrice').textContent = currentStock.price.toFixed(2);
            const holdingShares = getHoldingShares(stock.symbol, market);
            document.getElementById('tradeHoldingShares').textContent = holdingShares % 1 === 0 ? holdingShares : holdingShares.toFixed(2);
            document.getElementById('tradeShares').value = '';
            document.getElementById('tradeTotalAmount').textContent = '0';
            
            document.getElementById('tradeModal').classList.add('active');
            updateChartTabsActive();
            
            // ç»˜åˆ¶å›¾è¡¨
            drawStockChart(currentStock);
            
            // ç›‘å¬è‚¡æ•°è¾“å…¥
            document.getElementById('tradeShares').oninput = function() {
                const shares = parseFloat(this.value) || 0;
                const total = shares * currentStock.price;
                document.getElementById('tradeTotalAmount').textContent = total.toFixed(2);
            };
        }

        function setChartRange(range) {
            currentChartRange = range;
            updateChartTabsActive();
            if (currentStock) {
                drawStockChart(currentStock);
            }
        }

        function updateChartTabsActive() {
            const tabs = document.querySelectorAll('#chartTabs .chart-tab');
            tabs.forEach(tab => {
                const isActive = tab.dataset.range === currentChartRange;
                tab.classList.toggle('active', isActive);
            });
        }

        function getChartRangeConfig() {
            const hour = 60 * 60 * 1000;
            const day = 24 * hour;
            const configs = {
                day: { points: 24, interval: hour, volatility: 0.01, label: ts => `${new Date(ts).getHours()}:00` },
                week: { points: 7, interval: day, volatility: 0.02, label: ts => new Date(ts).toLocaleDateString() },
                month: { points: 30, interval: day, volatility: 0.03, label: ts => new Date(ts).toLocaleDateString() },
                year: { points: 12, interval: 30 * day, volatility: 0.05, label: ts => `${new Date(ts).getFullYear()}/${new Date(ts).getMonth() + 1}` }
            };
            return configs[currentChartRange] || configs.day;
        }

        function drawStockChart(stock) {
            const ctx = document.getElementById('stockChart');
            const config = getChartRangeConfig();
            
            // ç”Ÿæˆæ¨¡æ‹Ÿå†å²æ•°æ®
            const data = [];
            let basePrice = stock.price;
            for (let i = config.points - 1; i >= 0; i--) {
                const timestamp = Date.now() - i * config.interval;
                const change = (Math.random() - 0.5) * basePrice * config.volatility;
                basePrice = Math.max(basePrice + change, stock.price * 0.5);
                const label = config.label(timestamp);
                data.push({
                    label,
                    price: basePrice
                });
            }
            data[data.length - 1].price = stock.price;
            
            if (stockChart) {
                stockChart.destroy();
            }
            
            stockChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.label),
                    datasets: [{
                        label: 'ä»·æ ¼',
                        data: data.map(d => d.price),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        function executeTrade(type) {
            const shares = parseFloat(document.getElementById('tradeShares').value);
            
            if (!shares || shares <= 0) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„è‚¡æ•°ï¼');
                return;
            }
            
            const total = shares * currentStock.price;
            
            if (type === 'buy') {
                if (total > currentUser.wallet) {
                    alert('ä½™é¢ä¸è¶³ï¼');
                    return;
                }
                
                currentUser.wallet -= total;
                
                // æ·»åŠ æŒä»“
                const holdings = JSON.parse(localStorage.getItem('holdings_' + currentUser.id) || '[]');
                const existing = holdings.find(h => h.symbol === currentStock.symbol && h.market === currentStock.market);
                
                if (existing) {
                    existing.shares += shares;
                    existing.avgPrice = ((existing.avgPrice * (existing.shares - shares)) + (currentStock.price * shares)) / existing.shares;
                } else {
                    holdings.push({
                        symbol: currentStock.symbol,
                        name: currentStock.name,
                        market: currentStock.market,
                        shares: shares,
                        avgPrice: currentStock.price,
                        purchaseDate: new Date().toISOString()
                    });
                }
                
                localStorage.setItem('holdings_' + currentUser.id, JSON.stringify(holdings));
                
                // æ·»åŠ äº¤æ˜“è®°å½•
                const transactions = JSON.parse(localStorage.getItem('transactions_' + currentUser.id) || '[]');
                transactions.unshift({
                    type: 'buy',
                    symbol: currentStock.symbol,
                    name: currentStock.name,
                    market: currentStock.market,
                    shares: shares,
                    price: currentStock.price,
                    total: total,
                    date: new Date().toISOString()
                });
                localStorage.setItem('transactions_' + currentUser.id, JSON.stringify(transactions));
                
                alert('ä¹°å…¥æˆåŠŸï¼');
            } else if (type === 'sell') {
                const holdings = JSON.parse(localStorage.getItem('holdings_' + currentUser.id) || '[]');
                const holding = holdings.find(h => h.symbol === currentStock.symbol && h.market === currentStock.market);
                
                if (!holding || holding.shares < shares) {
                    alert('æŒè‚¡æ•°é‡ä¸è¶³ï¼');
                    return;
                }
                
                currentUser.wallet += total;
                holding.shares -= shares;
                
                if (holding.shares === 0) {
                    const index = holdings.indexOf(holding);
                    holdings.splice(index, 1);
                }
                
                localStorage.setItem('holdings_' + currentUser.id, JSON.stringify(holdings));
                
                // æ·»åŠ äº¤æ˜“è®°å½•
                const transactions = JSON.parse(localStorage.getItem('transactions_' + currentUser.id) || '[]');
                transactions.unshift({
                    type: 'sell',
                    symbol: currentStock.symbol,
                    name: currentStock.name,
                    market: currentStock.market,
                    shares: shares,
                    price: currentStock.price,
                    total: total,
                    date: new Date().toISOString()
                });
                localStorage.setItem('transactions_' + currentUser.id, JSON.stringify(transactions));
                
                alert('å–å‡ºæˆåŠŸï¼');
            }
            
            // æ›´æ–°ç”¨æˆ·æ•°æ®
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const userIndex = users.findIndex(u => u.id === currentUser.id);
            if (userIndex !== -1) {
                users[userIndex] = currentUser;
                localStorage.setItem('users', JSON.stringify(users));
            }
            
            updateWalletDisplay();
            closeModal('tradeModal');
        }

        // åŠ è½½äº¤æ˜“å†å²
        function loadTransactionHistory() {
            const transactions = JSON.parse(localStorage.getItem('transactions_' + currentUser.id) || '[]');
            const listEl = document.getElementById('transactionList');
            
            if (transactions.length === 0) {
                listEl.innerHTML = '<div style="text-align:center; padding:40px; color:#666;">æš‚æ— äº¤æ˜“è®°å½•</div>';
                return;
            }
            
            listEl.innerHTML = '';
            
            transactions.forEach(tx => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                
                const typeText = tx.type === 'buy' ? 'ä¹°å…¥' : 'å–å‡º';
                const typeColor = tx.type === 'buy' ? '#27ae60' : '#e74c3c';
                
                item.innerHTML = `
                    <div class="item-header">
                        <span style="color:${typeColor}; font-weight:700;">${typeText}</span>
                        <span>Â¥${tx.total.toFixed(2)}</span>
                    </div>
                    <div class="item-details">
                        <div>${tx.name} (${tx.symbol}) - ${tx.market}</div>
                        <div>æ•°é‡: ${tx.shares} | å•ä»·: Â¥${tx.price.toFixed(2)}</div>
                        <div>${new Date(tx.date).toLocaleString()}</div>
                    </div>
                `;
                
                listEl.appendChild(item);
            });
        }

        function getHoldingShares(symbol, market) {
            if (!currentUser) return 0;
            const holdings = JSON.parse(localStorage.getItem('holdings_' + currentUser.id) || '[]');
            const holding = holdings.find(h => h.symbol === symbol && h.market === market);
            return holding ? holding.shares : 0;
        }

        // åŠ è½½æŒä»“
        function loadHoldings() {
            const holdings = JSON.parse(localStorage.getItem('holdings_' + currentUser.id) || '[]');
            const listEl = document.getElementById('holdingsList');
            
            if (holdings.length === 0) {
                listEl.innerHTML = '<div style="text-align:center; padding:40px; color:#666;">æš‚æ— æŒä»“</div>';
                return;
            }
            
            listEl.innerHTML = '';
            
            holdings.forEach(holding => {
                const item = document.createElement('div');
                item.className = 'holding-item';
                
                // è·å–å½“å‰ä»·æ ¼
                let currentPrice = holding.avgPrice;
                const marketStocks = stockData[holding.market] || [];
                const stock = marketStocks.find(s => s.symbol === holding.symbol);
                if (stock) {
                    currentPrice = stock.price;
                }
                
                const totalValue = holding.shares * currentPrice;
                const profit = (currentPrice - holding.avgPrice) * holding.shares;
                const profitPercent = ((currentPrice - holding.avgPrice) / holding.avgPrice * 100).toFixed(2);
                const profitColor = profit >= 0 ? '#27ae60' : '#e74c3c';
                
                item.innerHTML = `
                    <div class="item-header">
                        <span>${holding.name} (${holding.symbol})</span>
                        <span style="color:${profitColor}; font-weight:700;">${profit >= 0 ? '+' : ''}${profit.toFixed(2)}</span>
                    </div>
                    <div class="item-details">
                        <div>å¸‚åœº: ${holding.market} | æŒè‚¡: ${holding.shares}è‚¡</div>
                        <div>æˆæœ¬ä»·: Â¥${holding.avgPrice.toFixed(2)} | ç°ä»·: Â¥${currentPrice.toFixed(2)}</div>
                        <div>å¸‚å€¼: Â¥${totalValue.toFixed(2)} | ç›ˆäº: <span style="color:${profitColor}">${profitPercent}%</span></div>
                    </div>
                `;
                
                const stockInfo = stock ? stock : { ...holding, price: currentPrice };
                item.onclick = () => openTradeModal(stockInfo, holding.market);
                
                listEl.appendChild(item);
            });
        }

        // ä¸ªäººèµ„æ–™
        function openProfile() {
            closeFloatingMenu();
            document.getElementById('profileName').textContent = currentUser.name;
            document.getElementById('profileEmail').textContent = currentUser.email;
            document.getElementById('profileWallet').textContent = currentUser.wallet.toFixed(2);
            
            // è®¡ç®—è‚¡ç¥¨èµ„äº§
            const holdings = JSON.parse(localStorage.getItem('holdings_' + currentUser.id) || '[]');
            let stockAssets = 0;
            
            holdings.forEach(holding => {
                const marketStocks = stockData[holding.market] || [];
                const stock = marketStocks.find(s => s.symbol === holding.symbol);
                const currentPrice = stock ? stock.price : holding.avgPrice;
                stockAssets += holding.shares * currentPrice;
            });
            
            document.getElementById('profileStockAssets').textContent = stockAssets.toFixed(2);
            
            // è®¡ç®—å®ç‰©èµ„äº§
            const physicalAssets = calculatePhysicalAssets();
            document.getElementById('profilePhysicalAssets').textContent = physicalAssets.toFixed(2);
            
            // æ€»èµ„äº§
            const totalAssets = currentUser.wallet + stockAssets + physicalAssets;
            document.getElementById('profileTotalAssets').textContent = totalAssets.toFixed(2);
            
            document.getElementById('profileModal').classList.add('active');
        }

        function calculatePhysicalAssets() {
            let total = 0;
            ownedAssets.forEach(asset => {
                total += asset.price * 10000; // è½¬æ¢ä¸ºå…ƒ
            });
            return total;
        }

        // èµ„äº§è´­ä¹°
        function openAssets() {
            closeFloatingMenu();
            document.getElementById('assetsModal').classList.add('active');
            renderAssets();
        }

        function showAssetType(type) {
            const tabs = document.querySelectorAll('#assetsModal .market-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'cars') {
                document.getElementById('carsSection').style.display = 'block';
                document.getElementById('propertiesSection').style.display = 'none';
            } else {
                document.getElementById('carsSection').style.display = 'none';
                document.getElementById('propertiesSection').style.display = 'block';
            }
        }

        function renderAssets() {
            // æ¸²æŸ“æ±½è½¦
            Object.keys(carData).forEach((range, index) => {
                const container = document.getElementById('cars' + (index + 1));
                container.innerHTML = '';
                
                carData[range].forEach(car => {
                    const isOwned = ownedAssets.some(a => a.type === 'car' && a.name === car.name);
                    
                    const card = document.createElement('div');
                    card.className = 'asset-card' + (isOwned ? ' owned' : '');
                    card.onclick = () => purchaseAsset('car', car);
                    
                    card.innerHTML = `
                        <div class="asset-name">${car.name}</div>
                        <div class="asset-price">Â¥${car.price}ä¸‡</div>
                        <div class="asset-type">${car.type}</div>
                        ${isOwned ? '<div style="color:#27ae60; font-weight:600; margin-top:5px;">âœ“ å·²æ‹¥æœ‰</div>' : ''}
                    `;
                    
                    container.appendChild(card);
                });
            });
            
            // æ¸²æŸ“æˆ¿äº§
            Object.keys(propertyData).forEach((range, index) => {
                const container = document.getElementById('properties' + (index + 1));
                container.innerHTML = '';
                
                propertyData[range].forEach(property => {
                    const isOwned = ownedAssets.some(a => a.type === 'property' && a.name === property.name);
                    
                    const card = document.createElement('div');
                    card.className = 'asset-card' + (isOwned ? ' owned' : '');
                    card.onclick = () => purchaseAsset('property', property);
                    
                    card.innerHTML = `
                        <div class="asset-name">${property.name}</div>
                        <div class="asset-price">Â¥${property.price}ä¸‡</div>
                        <div class="asset-type">${property.location}</div>
                        ${isOwned ? '<div style="color:#27ae60; font-weight:600; margin-top:5px;">âœ“ å·²æ‹¥æœ‰</div>' : ''}
                    `;
                    
                    container.appendChild(card);
                });
            });
        }

        function openLeaderboard() {
            closeFloatingMenu();
            renderLeaderboard();
            document.getElementById('leaderboardModal').classList.add('active');
        }

        function renderLeaderboard() {
            const listEl = document.getElementById('leaderboardList');
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.length === 0) {
                listEl.innerHTML = '<div style="text-align:center; padding:40px; color:#666;">æš‚æ— ç”¨æˆ·æ•°æ®</div>';
                return;
            }
            
            const rankings = users.map(user => {
                const wallet = Number(user.wallet || 0);
                const holdings = JSON.parse(localStorage.getItem('holdings_' + user.id) || '[]');
                const owned = JSON.parse(localStorage.getItem('assets_' + user.id) || '[]');
                const userStockData = JSON.parse(localStorage.getItem('stockData_' + user.id) || 'null') || cloneStockData();
                
                let stockAssets = 0;
                holdings.forEach(holding => {
                    const marketStocks = userStockData[holding.market] || [];
                    const stock = marketStocks.find(s => s.symbol === holding.symbol);
                    const currentPrice = stock ? stock.price : holding.avgPrice;
                    stockAssets += holding.shares * currentPrice;
                });
                
                let physicalAssets = 0;
                owned.forEach(asset => {
                    physicalAssets += (asset.price || 0) * 10000;
                });
                
                const totalAssets = wallet + stockAssets + physicalAssets;
                
                return {
                    id: user.id,
                    name: user.name || user.email || 'æœªå‘½åç”¨æˆ·',
                    total: totalAssets
                };
            }).sort((a, b) => b.total - a.total);
            
            listEl.innerHTML = '';
            
            rankings.forEach((user, index) => {
                const item = document.createElement('div');
                item.className = 'leaderboard-item';
                item.innerHTML = `
                    <div>
                        <span style="color:#667eea; margin-right:8px;">#${index + 1}</span>
                        ${user.name}
                    </div>
                    <div>Â¥${formatCurrency(user.total)}</div>
                `;
                listEl.appendChild(item);
            });
        }

        function formatCurrency(value) {
            return Number(value || 0).toLocaleString('zh-CN', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        function purchaseAsset(type, asset) {
            const isOwned = ownedAssets.some(a => a.type === type && a.name === asset.name);
            
            if (isOwned) {
                alert('æ‚¨å·²ç»æ‹¥æœ‰è¿™é¡¹èµ„äº§äº†ï¼');
                return;
            }
            
            const price = asset.price * 10000; // è½¬æ¢ä¸ºå…ƒ
            
            if (price > currentUser.wallet) {
                alert('ä½™é¢ä¸è¶³ï¼');
                return;
            }
            
            if (confirm(`ç¡®å®šè¦è´­ä¹° ${asset.name} å—ï¼Ÿä»·æ ¼ï¼šÂ¥${asset.price}ä¸‡`)) {
                currentUser.wallet -= price;
                
                ownedAssets.push({
                    type: type,
                    name: asset.name,
                    price: asset.price,
                    purchaseDate: new Date().toISOString()
                });
                
                saveOwnedAssets();
                
                // æ›´æ–°ç”¨æˆ·æ•°æ®
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex] = currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                }
                
                updateWalletDisplay();
                renderAssets();
                alert('è´­ä¹°æˆåŠŸï¼');
            }
        }

        function loadOwnedAssets() {
            if (!currentUser) return;
            ownedAssets = JSON.parse(localStorage.getItem('assets_' + currentUser.id) || '[]');
        }

        function saveOwnedAssets() {
            localStorage.setItem('assets_' + currentUser.id, JSON.stringify(ownedAssets));
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('active');
                }
            });
        };
    </script>
</body>
</html>
